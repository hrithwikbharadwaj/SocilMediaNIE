{% extends 'base.html' %}
{% block head_title %}   hrithwik{% endblock head_title %}

{% block content %}

 <!-- hey thiru -->
<div id='tweets'>
    Replace Me
</div>
 <script>

const tweetsElement = document.getElementById("tweets")
tweetsElement.innerHTML='Loading ....'

const xhr = new XMLHttpRequest()
const method= 'GET' // "POST"
const url = "/tweets"
const responseType = "json"
function formatTweetElement(tweet){
    var formattedTweet= "<div class='mb-4 tweet' id='tweet-"+ tweet.id +"'><p>" + tweet.content + "</p></div>"
    return formattedTweet
}
xhr.responseType = responseType
xhr.open(method, url)

xhr.onload = function() {
const serverResponse = xhr.response
var listedItems = serverResponse. response
var finalTweetStr=""
var i;
for(i=0;i<listedItems.length;i++)
{   var tweetObj=listedItems[i]
    var currentItem=formatTweetElement(tweetObj)
    finalTweetStr +=currentItem
}
tweetsElement.innerHTML=finalTweetStr

}
xhr.send()
 </script>
{% endblock content %}

